[
    {
      "name": "scim-bridge",
      "image": "1password/scim:v1.6.1",
      "cpu": 128,
      "memory": 512,
      "essential": true,
      "dependsOn": [
        {
          "containerName": "redis",
          "condition": "START"
        }
      ],
      "portMappings": [
        {
          "containerPort": 3002,
          "hostPort": 3002
        }
      ],
      "entrypoint": ["/op-scim/op-scim", "--redis-host=localhost", "--redis-port=6379"],
      "environment": [
        { "name": "OP_REDIS_URL", "value": "localhost" },
        { "name": "OP_LETSENCRYPT_DOMAIN", "value": "" }
      ],
      "secrets": [
        {"name": "OP_SESSION", "valueFrom": "arn:aws:secretsmanager:us-east-1:729119775555:secret:amanda/scim-bridge/scimsession-ukalr5"}
      ],
      "logConfiguration": {
        "logDriver": "awslogs",
        "options": { 
           "awslogs-group" : "/ecs/scim-bridge",
           "awslogs-region": "us-east-1",
           "awslogs-stream-prefix": "ecs-scim"
        }
      }
    },
    {
      "name": "redis",
      "image": "redis:latest",
      "cpu": 128,
      "memory": 256,
      "essential": true,
      "restart": "always",
      "logConfiguration": {
        "logDriver": "awslogs",
        "options": { 
           "awslogs-group" : "/ecs/scim-bridge",
           "awslogs-region": "us-east-1",
           "awslogs-stream-prefix": "ecs-redis"
        }
      },
      "portMappings": [
        {
          "containerPort": 6379,
          "hostPort": 6379
        }
      ]
    }
  ]